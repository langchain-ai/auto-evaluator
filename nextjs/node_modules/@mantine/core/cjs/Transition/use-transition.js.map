{"version":3,"file":"use-transition.js","sources":["../../src/Transition/use-transition.ts"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\nimport { useReducedMotion, useDidUpdate } from '@mantine/hooks';\nimport { useMantineTheme } from '@mantine/styles';\n\nexport type TransitionStatus =\n  | 'entered'\n  | 'exited'\n  | 'entering'\n  | 'exiting'\n  | 'pre-exiting'\n  | 'pre-entering';\n\ninterface UseTransition {\n  duration: number;\n  exitDuration: number;\n  timingFunction: string;\n  mounted: boolean;\n  onEnter?(): void;\n  onExit?(): void;\n  onEntered?(): void;\n  onExited?(): void;\n}\n\nexport function useTransition({\n  duration,\n  exitDuration,\n  timingFunction,\n  mounted,\n  onEnter,\n  onExit,\n  onEntered,\n  onExited,\n}: UseTransition) {\n  const theme = useMantineTheme();\n  const shouldReduceMotion = useReducedMotion();\n  const reduceMotion = theme.respectReducedMotion ? shouldReduceMotion : false;\n  const [transitionDuration, setTransitionDuration] = useState(reduceMotion ? 0 : duration);\n  const [transitionStatus, setStatus] = useState<TransitionStatus>(mounted ? 'entered' : 'exited');\n  const timeoutRef = useRef<number>(-1);\n\n  const handleStateChange = (shouldMount: boolean) => {\n    const preHandler = shouldMount ? onEnter : onExit;\n    const handler = shouldMount ? onEntered : onExited;\n\n    setStatus(shouldMount ? 'pre-entering' : 'pre-exiting');\n    window.clearTimeout(timeoutRef.current);\n\n    const newTransitionDuration = reduceMotion ? 0 : shouldMount ? duration : exitDuration;\n    setTransitionDuration(newTransitionDuration);\n\n    if (newTransitionDuration === 0) {\n      typeof preHandler === 'function' && preHandler();\n      typeof handler === 'function' && handler();\n      setStatus(shouldMount ? 'entered' : 'exited');\n    } else {\n      const preStateTimeout = window.setTimeout(() => {\n        typeof preHandler === 'function' && preHandler();\n        setStatus(shouldMount ? 'entering' : 'exiting');\n      }, 10);\n\n      timeoutRef.current = window.setTimeout(() => {\n        window.clearTimeout(preStateTimeout);\n        typeof handler === 'function' && handler();\n        setStatus(shouldMount ? 'entered' : 'exited');\n      }, newTransitionDuration);\n    }\n  };\n\n  useDidUpdate(() => {\n    handleStateChange(mounted);\n  }, [mounted]);\n\n  useEffect(() => () => window.clearTimeout(timeoutRef.current), []);\n\n  return {\n    transitionDuration,\n    transitionStatus,\n    transitionTimingFunction: timingFunction || theme.transitionTimingFunction,\n  };\n}\n"],"names":["useMantineTheme","useReducedMotion","useState","useRef","useDidUpdate","useEffect"],"mappings":";;;;;;;;AAGO,SAAS,aAAa,CAAC;AAC9B,EAAE,QAAQ;AACV,EAAE,YAAY;AACd,EAAE,cAAc;AAChB,EAAE,OAAO;AACT,EAAE,OAAO;AACT,EAAE,MAAM;AACR,EAAE,SAAS;AACX,EAAE,QAAQ;AACV,CAAC,EAAE;AACH,EAAE,MAAM,KAAK,GAAGA,sBAAe,EAAE,CAAC;AAClC,EAAE,MAAM,kBAAkB,GAAGC,sBAAgB,EAAE,CAAC;AAChD,EAAE,MAAM,YAAY,GAAG,KAAK,CAAC,oBAAoB,GAAG,kBAAkB,GAAG,KAAK,CAAC;AAC/E,EAAE,MAAM,CAAC,kBAAkB,EAAE,qBAAqB,CAAC,GAAGC,cAAQ,CAAC,YAAY,GAAG,CAAC,GAAG,QAAQ,CAAC,CAAC;AAC5F,EAAE,MAAM,CAAC,gBAAgB,EAAE,SAAS,CAAC,GAAGA,cAAQ,CAAC,OAAO,GAAG,SAAS,GAAG,QAAQ,CAAC,CAAC;AACjF,EAAE,MAAM,UAAU,GAAGC,YAAM,CAAC,CAAC,CAAC,CAAC,CAAC;AAChC,EAAE,MAAM,iBAAiB,GAAG,CAAC,WAAW,KAAK;AAC7C,IAAI,MAAM,UAAU,GAAG,WAAW,GAAG,OAAO,GAAG,MAAM,CAAC;AACtD,IAAI,MAAM,OAAO,GAAG,WAAW,GAAG,SAAS,GAAG,QAAQ,CAAC;AACvD,IAAI,SAAS,CAAC,WAAW,GAAG,cAAc,GAAG,aAAa,CAAC,CAAC;AAC5D,IAAI,MAAM,CAAC,YAAY,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;AAC5C,IAAI,MAAM,qBAAqB,GAAG,YAAY,GAAG,CAAC,GAAG,WAAW,GAAG,QAAQ,GAAG,YAAY,CAAC;AAC3F,IAAI,qBAAqB,CAAC,qBAAqB,CAAC,CAAC;AACjD,IAAI,IAAI,qBAAqB,KAAK,CAAC,EAAE;AACrC,MAAM,OAAO,UAAU,KAAK,UAAU,IAAI,UAAU,EAAE,CAAC;AACvD,MAAM,OAAO,OAAO,KAAK,UAAU,IAAI,OAAO,EAAE,CAAC;AACjD,MAAM,SAAS,CAAC,WAAW,GAAG,SAAS,GAAG,QAAQ,CAAC,CAAC;AACpD,KAAK,MAAM;AACX,MAAM,MAAM,eAAe,GAAG,MAAM,CAAC,UAAU,CAAC,MAAM;AACtD,QAAQ,OAAO,UAAU,KAAK,UAAU,IAAI,UAAU,EAAE,CAAC;AACzD,QAAQ,SAAS,CAAC,WAAW,GAAG,UAAU,GAAG,SAAS,CAAC,CAAC;AACxD,OAAO,EAAE,EAAE,CAAC,CAAC;AACb,MAAM,UAAU,CAAC,OAAO,GAAG,MAAM,CAAC,UAAU,CAAC,MAAM;AACnD,QAAQ,MAAM,CAAC,YAAY,CAAC,eAAe,CAAC,CAAC;AAC7C,QAAQ,OAAO,OAAO,KAAK,UAAU,IAAI,OAAO,EAAE,CAAC;AACnD,QAAQ,SAAS,CAAC,WAAW,GAAG,SAAS,GAAG,QAAQ,CAAC,CAAC;AACtD,OAAO,EAAE,qBAAqB,CAAC,CAAC;AAChC,KAAK;AACL,GAAG,CAAC;AACJ,EAAEC,kBAAY,CAAC,MAAM;AACrB,IAAI,iBAAiB,CAAC,OAAO,CAAC,CAAC;AAC/B,GAAG,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC;AAChB,EAAEC,eAAS,CAAC,MAAM,MAAM,MAAM,CAAC,YAAY,CAAC,UAAU,CAAC,OAAO,CAAC,EAAE,EAAE,CAAC,CAAC;AACrE,EAAE,OAAO;AACT,IAAI,kBAAkB;AACtB,IAAI,gBAAgB;AACpB,IAAI,wBAAwB,EAAE,cAAc,IAAI,KAAK,CAAC,wBAAwB;AAC9E,GAAG,CAAC;AACJ;;;;"}