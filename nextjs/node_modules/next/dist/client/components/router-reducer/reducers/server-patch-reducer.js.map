{"version":3,"sources":["../../../../../src/client/components/router-reducer/reducers/server-patch-reducer.ts"],"names":["serverPatchReducer","state","action","flightData","previousTree","overrideCanonicalUrl","cache","mutable","isForCurrentTree","JSON","stringify","tree","console","log","handleMutable","handleExternalUrl","pushRef","pendingPush","flightDataPath","flightSegmentPath","slice","treePatch","newTree","applyRouterStatePatchToTree","Error","isNavigatingToNewRootLayout","canonicalUrl","canonicalUrlOverrideHref","createHrefFromUrl","undefined","applyFlightData","patchedTree"],"mappings":"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"}