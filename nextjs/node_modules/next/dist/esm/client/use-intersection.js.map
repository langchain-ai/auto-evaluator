{"version":3,"sources":["../../src/client/use-intersection.tsx"],"names":["useCallback","useEffect","useRef","useState","requestIdleCallback","cancelIdleCallback","hasIntersectionObserver","IntersectionObserver","observers","Map","idList","createObserver","options","id","root","margin","rootMargin","existing","find","obj","instance","get","elements","observer","entries","forEach","entry","callback","target","isVisible","isIntersecting","intersectionRatio","push","set","observe","element","unobserve","delete","size","disconnect","index","findIndex","splice","useIntersection","rootRef","disabled","isDisabled","visible","setVisible","elementRef","setElement","current","tagName","idleCallback","resetVisible"],"mappings":"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"}